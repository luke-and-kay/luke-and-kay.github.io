<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boat on Animated Wave</title>
    <link rel="stylesheet" href="waves-style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link 
        href="https://fonts.googleapis.com/css2?family=Bellefair&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap" 
        rel="stylesheet" 
    \>
</head>
<body>
    <div class="background"></div>

    <div class="wave-container">
        <svg
            class="wave-back-svg" 
            viewBox="0 0 1440 320" 
            preserveAspectRatio="none"
        >
            <path 
                id="waveBackPath" 
                fill="#054D6A" 
                d="M0,160 C360,240 1080,80 1440,160 L1440,320 L0,320 Z" 
            />
        </svg>
        <img src="assets/boat2.svg" alt="Boat" class="boat" />
        <svg 
            class="wave-front-svg" 
            viewBox="0 0 1440 320" 
            preserveAspectRatio="none"
        >
            <path
                id="waveFrontPath" 
                fill="#0B5775" 
                d="M0,160 C360,240 1080,80 1440,160 L1440,320 L0,320 Z"
            />
        </svg>
    </div>

    <div class="save-the-date-container">
        <p class="announcement-subtext">SAVE THE DATE</p>
        <div class="announcement-text">KAYLEIGH</div>
        <div class="announcement-ampersand">&</div>
        <div class="announcement-text">LUKE</div>
        <div class="announcement-subtext">ARE GETTING MARRIED!</div>
        <div class="date-container">
            <div class="date-subcontainer">
                <div class="bordered-date">SAT</div>
                <div class="date-day">20</div>
                <div class="bordered-date">JUNE</div>
            </div>
            <div class="date-year">2026</div>
        </div>
        <div class="location">BRISTOL, UK</div>
        <div class="details-container">
            <div class="details-1">formal invitation to follow</div>
            <div class="details-2">
                we hope you're able to celebrate with us, but if you already
                know you're unavailable, please let Kayleigh or Luke know
            </div>
        </div>
    </div>

    <!-- <div class="bird-container" id="bird-container">
        <img class="frame" src="assets/bird-frame-1.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-2.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-3.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-2.svg" style="display:none;">
    </div> -->

    <div class="animation-container" id="animation-container">
        <img class="frame" src="assets/bird-frame-1.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-2.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-3.svg" style="display:none;">
        <img class="frame" src="assets/bird-frame-2.svg" style="display:none;">
    </div>

    <script>
        const backWave = document.getElementById('waveBackPath');
        const frontWave = document.getElementById('waveFrontPath');
        const boat = document.querySelector('.boat');

        const params = {
            svgWidth: 1440,
            svgHeight: 320,
            stepSize: 10,
            boat: {
                xFreq: 0.115 / window.innerWidth,
                xMax: 10,
                yMax: 2.5,
                rFreq: 0.001,
                rMax: 0.6,
            },
            back: {
                wFreq: 0.003,
                wMax: 5,
                wHeight: 190,
            },
            front: {
                wFreq: 0.005,
                wMax: 14,
                wHeight: 110,
            },
        };

        function oscillate(time) {

            let dB = `M0,${params.back.wHeight}`;
            let dF = `M0,${params.front.wHeight}`;

            for (let i = 0; i <= params.svgWidth; i += params.stepSize) {
                let yB = Math.sin((i + time) * params.back.wFreq);
                let yF = Math.sin((i + time) * params.front.wFreq);
                yB *= params.back.wMax;
                yB += params.back.wHeight;
                dB += `L${i},${yB}`;
                yF *= params.front.wMax;
                yF += params.front.wHeight;
                dF += `L${i},${yF}`;
            };

            dB += ` L${params.svgWidth},${params.svgHeight}`;
            dB += ` L0,${params.svgHeight} Z`;
            dF += ` L${params.svgWidth},${params.svgHeight}`;
            dF += ` L0,${params.svgHeight} Z`;

            backWave.setAttribute('d', dB);
            frontWave.setAttribute('d', dF);

            const boatX = params.boat.xMax * Math.sin(time * params.boat.xFreq);
            const boatR = params.boat.rMax * Math.sin(time * params.boat.rFreq);


            let boatY = Math.sin((2 * params.svgWidth + time) * params.back.wFreq);
            boatY *= params.boat.yMax;


            boat.style.transform = `
                translateX(calc(-50% + ${boatX}vw))
                translateY(${boatY}px)
                rotate(${boatR}deg
            `;
            requestAnimationFrame(oscillate);
        }

        requestAnimationFrame(oscillate);



        const glideProportion = 0.8;
        const frames = document.querySelectorAll('.frame');
  const totalFrames = frames.length;
  let frameIndex = 0;
  let animationInterval;

  function showNextFrame() {
    frames.forEach((f, i) => f.style.display = 'none');
    frames[frameIndex].style.display = 'block';
    if (frameIndex === 0) {
        frameIndex = Math.random() < glideProportion ? 0 : 1;
    } else {
        frameIndex = (frameIndex + 1) % totalFrames;
    };
  }

  function startFrameAnimation() {
    if (animationInterval) clearInterval(animationInterval);
    animationInterval = setInterval(showNextFrame, 100); // 10 FPS
  }

  function moveAcrossScreen() {
    const container = document.getElementById('animation-container');
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;

    // Random direction and top position
    const direction = Math.random() < 0.5 ? 'left-to-right' : 'right-to-left';
    const topPosition = Math.random() * (screenHeight / 8);

    if (direction === 'right-to-left') {
        container.style.transform = 'scaleX(-1)';
    } else {
        container.style.transform = 'scaleX(1)';
    }

    // Initial and final positions
    const startLeft = direction === 'left-to-right' ? -120 : screenWidth + 120;
    const endLeft = direction === 'left-to-right' ? screenWidth + 120 : -120;

    const startTop = Math.random() * (screenHeight / 2);
    const endTop = Math.random() * (screenHeight / 2);

    // Set initial position
    container.style.top = `${topPosition}px`;
    container.style.left = `${startLeft}px`;

    startFrameAnimation();

    const duration = Math.max(10 * screenWidth, 6); // 5 seconds to cross
    const startTime = performance.now();

    function animate(time) {
      const elapsed = time - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const newLeft = startLeft + (endLeft - startLeft) * progress;
      const newTop = startTop + (endTop - startTop) * progress;
      container.style.left = `${newLeft}px`;
      container.style.top = `${newTop}px`

      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        clearInterval(animationInterval);
        frames.forEach(f => f.style.display = 'none');
        scheduleNextMove();
      }
    }

    requestAnimationFrame(animate);
  }

  function scheduleNextMove() {
    const delay = 4000 + Math.random() * 4000; // between 8s–12s
    setTimeout(moveAcrossScreen, delay);
  }

  // Start the animation cycle
  scheduleNextMove();







        // // Bird animations

        // const glideProportion = 0.8;
        // const birdOffset = -120;
        // const frameLength = 200;
        // const frames = document.querySelectorAll('.frame');
        // const totalFrames = frames.length;
        // let frameIndex = 0;
        // let animationInterval;

        // function showNextFrame() {
        //     frames.forEach((f, i) => f.style.display = 'none');
        //     frames[frameIndex].style.display = 'block';
        //     if (frameIndex === 0) {
        //         frameIndex = Math.random() < glideProportion ? 0 : 1;
        //     } else {
        //         frameIndex = (frameIndex + 1) % totalFrames;
        //     };
        // };

        // // setInterval(showNextFrame, 100);

        // function startBirdAnimation() {
        //     if (animationInterval) clearInterval(animationInterval);
        //     animationInterval = setInterval(showNextFrame, frameLength);
        // };

        // function moveBirdAcrossScreen() {
        //     const container = document.getElementById('bird-container');
        //     const screenWidth = window.innerWidth;
        //     const screenHeight = window.innerHeight;

        //     const direction = Math.random() < 0.5 ? 'left' : 'right';
        //     const topPosition = Math.random() * (screenHeight / 2);

        //     const startLeft = direction === 'left' ? -birdOffset : screenWidth + birdOffset;
        //     const endLeft = direction === 'left' ? screenWidth + birdOffset : -birdOffset;

        //     container.style.top = `${topPosition}px`;
        //     container.style.left = `${startLeft}px`;

        //     startBirdAnimation();

        //     const duration = 0.00001 * screenWidth;
        //     const startTime = performance.now();

        //     function animateBird(time) {
        //         const elapsed = time - startTime;
        //         const progress = Math.min(elapsed / duration, 1);
        //         const newLeft = startLeft + (endLeft - startLeft) * progress;
        //         container.style.left = `${newLeft}px`;

        //         if (progress < 1) {
        //             requestAnimationFrame(animate);
        //         } else {
        //             clearInterval(animationInterval);
        //             frames.forEach(f => f.style.display = 'none');
        //             scheduleNextMove();
        //         };
        //     };

        //     requestAnimationFrame(animateBird);
        // };

        // function scheduleNextMove() {
        //     const delay = 1000 + Math.random() * 1000; // between 8s–12s
        //     setTimeout(moveBirdAcrossScreen, delay);
        // };

        // // scheduleNextMove();
        // scheduleNextMove();


    </script>

</body>
</html>
